{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yassine\\\\Desktop\\\\project\\\\PROJECT\\\\Project1 - Copie\\\\client\\\\src\\\\components\\\\NewHost\\\\NewHost.js\";\nimport React from \"react\";\nimport { MDBRow, MDBCol, MDBInput, MDBBtn, Container, MDBContainer, MDBCard, MDBAlert } from \"mdbreact\";\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { registerHost } from '../../actions/authActions';\nimport { clearErrors } from '../../actions/errorActions';\nimport { addItem, getItems } from '../../actions/itemActions';\n\nclass NewHost extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: \"\",\n      last_name: \"\",\n      email: \"\",\n      city: \"\",\n      password: \"\",\n      ref: ''\n    };\n\n    this.onChange = e => {\n      this.setState({\n        ref: this.props.item.items.filter(el => el.num === this.props.match.params.id).map(el => el._id)\n      });\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault(); //  const {name,email,password}=this.state;\n      //create user object\n\n      const newHost = {\n        name: this.state.name,\n        last_name: this.state.last_name,\n        city: this.state.city,\n        email: this.state.email,\n        password: this.state.password,\n        ref: this.state.ref,\n        role: \"pending host\"\n      };\n      console.log(newHost);\n      this.props.registerHost(newHost);\n    };\n  }\n\n  componentDidMount(id) {\n    this.props.getItems(id);\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      error,\n      isAuthHost\n    } = this.props;\n\n    if (error !== prevProps.error) {\n      //check for register error\n      if (error.id === 'HOST_REGISTER_FAIL') {\n        this.setState({\n          msg: error.msg.msg\n        });\n      } else {\n        this.setState({\n          msg: null\n        });\n      }\n    }\n\n    if (isAuthHost) {\n      this.props.history.push('/');\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(MDBContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, this.state.msg ? /*#__PURE__*/React.createElement(MDBAlert, {\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 28\n      }\n    }, this.state.msg) : null, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"needs-validation\",\n      onSubmit: this.onSubmit,\n      noValidate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      icon: \"user\",\n      value: this.state.fname,\n      name: \"name\",\n      onChange: this.onChange,\n      type: \"text\",\n      id: \"materialFormRegisterNameEx\",\n      label: \"First name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"valid-feedback ml-4 pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, \"Looks good!\"))), /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      icon: \"address-card\",\n      value: this.state.lname,\n      name: \"last_name\",\n      onChange: this.onChange,\n      type: \"text\",\n      id: \"materialFormRegisterEmailEx2\",\n      label: \"Last name\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"valid-feedback ml-4 pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"Looks good!\"))), /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      icon: \"envelope-open\",\n      value: this.state.email,\n      onChange: this.onChange,\n      type: \"email\",\n      id: \"materialFormRegisterConfirmEx3\",\n      name: \"email\",\n      label: \"Your Email address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      id: \"emailHelp\",\n      className: \"form-text text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, \"We'll never share your email with anyone else.\")))), /*#__PURE__*/React.createElement(MDBRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      icon: \"city\",\n      value: this.state.city,\n      onChange: this.onChange,\n      type: \"text\",\n      id: \"materialFormRegisterPasswordEx4\",\n      name: \"city\",\n      label: \"City\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback ml-4 pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, \"Please provide a valid city.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"valid-feedback ml-4 pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, \"Looks good!\"))), /*#__PURE__*/React.createElement(MDBCol, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      value: this.state.password,\n      icon: \"lock\",\n      type: \"password\",\n      name: \"password\",\n      onChange: this.onChange,\n      id: \"materialFormRegisterEmailEx2\",\n      label: \"Password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback ml-4 pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, \"Please provide a valid state.\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"valid-feedback ml-4 pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, \"Looks good!\")))), /*#__PURE__*/React.createElement(MDBRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MDBInput, {\n      type: \"checkbox\",\n      value: \"conditions\",\n      id: \"materialInvalidCheck\",\n      required: true,\n      label: \"Agree to terms and conditions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"invalid-feedback\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, \"You must agree before submitting.\"))), /*#__PURE__*/React.createElement(MDBBtn, {\n      color: \"primary\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, \"Submit Form\")));\n  }\n\n}\n\nNewHost.propTypes = {\n  getItems: PropTypes.func.isRequired,\n  item: PropTypes.object.isRequired,\n  isAuthHost: PropTypes.bool,\n  error: PropTypes.object.isRequired,\n  registerHost: PropTypes.func.isRequired,\n  clearErrors: PropTypes.func.isRequired\n};\n\nconst mapStateToProps = state => ({\n  item: state.item,\n  isAuthHost: state.auth.isAuthHost,\n  error: state.error\n});\n\nexport default connect(mapStateToProps, {\n  registerHost,\n  getItems,\n  clearErrors\n})(NewHost);","map":{"version":3,"sources":["C:/Users/Yassine/Desktop/project/PROJECT/Project1 - Copie/client/src/components/NewHost/NewHost.js"],"names":["React","MDBRow","MDBCol","MDBInput","MDBBtn","Container","MDBContainer","MDBCard","MDBAlert","connect","PropTypes","registerHost","clearErrors","addItem","getItems","NewHost","Component","state","name","last_name","email","city","password","ref","onChange","e","setState","props","item","items","filter","el","num","match","params","id","map","_id","target","value","onSubmit","preventDefault","newHost","role","console","log","componentDidMount","componentDidUpdate","prevProps","error","isAuthHost","msg","history","push","render","fname","lname","propTypes","func","isRequired","object","bool","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { MDBRow, MDBCol, MDBInput, MDBBtn,Container,MDBContainer,MDBCard,MDBAlert } from \"mdbreact\";\r\n\r\nimport {connect} from 'react-redux';\r\nimport PropTypes from 'prop-types'\r\nimport {registerHost} from '../../actions/authActions';\r\nimport{clearErrors} from '../../actions/errorActions';\r\nimport {addItem,getItems} from '../../actions/itemActions';\r\n\r\n\r\n\r\nclass NewHost extends React.Component {\r\n  state = {\r\n    name: \"\",\r\n    last_name: \"\",\r\n    email: \"\",\r\n    city: \"\",\r\n    password: \"\",\r\n    ref: ''\r\n  };\r\n      static propTypes={\r\n        getItems:PropTypes.func.isRequired,\r\n        item:PropTypes.object.isRequired,\r\n        isAuthHost:PropTypes.bool,\r\n        error:PropTypes.object.isRequired,\r\n        registerHost:PropTypes.func.isRequired,\r\n        clearErrors:PropTypes.func.isRequired\r\n    };\r\n    componentDidMount(id){\r\n      this.props.getItems(id);\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n      const {error,isAuthHost} = this.props;\r\n      if(error!==prevProps.error){\r\n          //check for register error\r\n          if(error.id==='HOST_REGISTER_FAIL'){\r\n              this.setState({msg:error.msg.msg})\r\n          } else{\r\n              this.setState({msg:null})\r\n          }\r\n      }\r\n      if(isAuthHost){\r\n        this.props.history.push('/')\r\n    }\r\n  }\r\n\r\n   ;\r\n   onChange=(e)=>{\r\n    this.setState({ref:this.props.item.items.filter(el => el.num===this.props.match.params.id).map(el =>el._id)})\r\n       this.setState({[e.target.name]:e.target.value})\r\n   }\r\n   onSubmit=(e)=>{\r\n       e.preventDefault();\r\n      //  const {name,email,password}=this.state;\r\n       //create user object\r\n       const newHost={\r\n           name:this.state.name,\r\n           last_name:this.state.last_name,\r\n           city:this.state.city,\r\n           email:this.state.email,\r\n           password:this.state.password,\r\n           ref:this.state.ref,\r\n           role:\"pending host\"\r\n       }\r\n       console.log(newHost)\r\n       this.props.registerHost(newHost);\r\n   };\r\n\r\n  render() {\r\n    \r\n    return (\r\n      \r\n      <MDBContainer>\r\n        \r\n        {this.state.msg ? (<MDBAlert color='danger'>{this.state.msg}</MDBAlert>):null}\r\n          <form\r\n          className='needs-validation'\r\n          onSubmit={this.onSubmit}\r\n          noValidate\r\n        >\r\n          <MDBRow>\r\n            <MDBCol md='4'>\r\n              <MDBInput\r\n                icon='user'\r\n                value={this.state.fname}\r\n                name='name'\r\n                onChange={this.onChange}\r\n                type='text'\r\n                id='materialFormRegisterNameEx'\r\n                label='First name'\r\n                required\r\n              >\r\n                <div className='valid-feedback ml-4 pl-3'>Looks good!</div>\r\n              </MDBInput>\r\n            </MDBCol>\r\n            <MDBCol md='4'>\r\n              <MDBInput\r\n                icon='address-card'\r\n                value={this.state.lname}\r\n                name='last_name'\r\n                onChange={this.onChange}\r\n                type='text'\r\n                id='materialFormRegisterEmailEx2'\r\n                label='Last name'\r\n                required\r\n              >\r\n                <div className='valid-feedback ml-4 pl-3'>Looks good!</div>\r\n              </MDBInput>\r\n            </MDBCol>\r\n            <MDBCol md='4'>\r\n              <MDBInput\r\n                icon='envelope-open'\r\n                value={this.state.email}\r\n                onChange={this.onChange}\r\n                type='email'\r\n                id='materialFormRegisterConfirmEx3'\r\n                name='email'\r\n                label='Your Email address'\r\n              >\r\n                <small id='emailHelp' className='form-text text-muted'>\r\n                  We'll never share your email with anyone else.\r\n                </small>\r\n              </MDBInput>\r\n            </MDBCol>\r\n          </MDBRow>\r\n          <MDBRow>\r\n            <MDBCol md='4'>\r\n              <MDBInput\r\n                icon='city'\r\n                value={this.state.city}\r\n                onChange={this.onChange}\r\n                type='text'\r\n                id='materialFormRegisterPasswordEx4'\r\n                name='city'\r\n                label='City'\r\n                required\r\n              >\r\n                <div className='invalid-feedback ml-4 pl-3'>\r\n                  Please provide a valid city.\r\n                </div>\r\n                <div className='valid-feedback ml-4 pl-3'>Looks good!</div>\r\n              </MDBInput>\r\n            </MDBCol>\r\n            <MDBCol md='4'>\r\n              <MDBInput\r\n                  value={this.state.password}\r\n                  icon=\"lock\"\r\n                  type='password'\r\n                  name='password'\r\n                  onChange={this.onChange}\r\n                  id='materialFormRegisterEmailEx2'\r\n                  label='Password'\r\n                  required\r\n                >\r\n                <div className='invalid-feedback ml-4 pl-3'>\r\n                  Please provide a valid state.\r\n                </div>\r\n                <div className='valid-feedback ml-4 pl-3'>Looks good!</div>\r\n              </MDBInput>\r\n            </MDBCol>\r\n          </MDBRow>\r\n          <MDBRow>\r\n            <MDBInput\r\n              type='checkbox'\r\n              value='conditions'\r\n              id='materialInvalidCheck'\r\n              required\r\n              label='Agree to terms and conditions'\r\n            >\r\n              <div className='invalid-feedback'>\r\n                You must agree before submitting.\r\n              </div>\r\n            </MDBInput>\r\n          </MDBRow>\r\n          <MDBBtn color='primary' type='submit'>\r\n            Submit Form\r\n          </MDBBtn>\r\n        </form>\r\n        </MDBContainer>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps=state=>({\r\n  item:state.item,\r\n  isAuthHost:state.auth.isAuthHost,\r\n  error:state.error    \r\n})\r\n\r\n\r\nexport default connect(mapStateToProps,{registerHost,getItems,clearErrors})(NewHost)"]},"metadata":{},"sourceType":"module"}