{"ast":null,"code":"import t from \"leaflet\";\n\nfunction e() {\n  return (e = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var n = arguments[e];\n\n      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r]);\n    }\n\n    return t;\n  }).apply(this, arguments);\n}\n\nfunction n(t, e) {\n  t.prototype = Object.create(e.prototype), t.prototype.constructor = t, t.__proto__ = e;\n}\n\nfunction r(t, e) {\n  return (r = Object.setPrototypeOf || function (t, e) {\n    return t.__proto__ = e, t;\n  })(t, e);\n}\n\nfunction o() {\n  if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n  if (Reflect.construct.sham) return !1;\n  if (\"function\" == typeof Proxy) return !0;\n\n  try {\n    return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;\n  } catch (t) {\n    return !1;\n  }\n}\n\nfunction i(t, e, n) {\n  return (i = o() ? Reflect.construct : function (t, e, n) {\n    var o = [null];\n    o.push.apply(o, e);\n    var i = new (Function.bind.apply(t, o))();\n    return n && r(i, n.prototype), i;\n  }).apply(null, arguments);\n}\n\nfunction s(t, e, n, r) {\n  void 0 === e && (e = \"\"), void 0 === r && (r = {});\n  var o = document.createElement(t);\n  return e && (o.className = e), Object.keys(r).forEach(function (t) {\n    if (\"function\" == typeof r[t]) {\n      var e = 0 === t.indexOf(\"on\") ? t.substr(2).toLowerCase() : t;\n      o.addEventListener(e, r[t]);\n    } else \"html\" === t ? o.innerHTML = r[t] : \"text\" === t ? o.innerText = r[t] : o.setAttribute(t, r[t]);\n  }), n && n.appendChild(o), o;\n}\n\nfunction a(t) {\n  t.preventDefault(), t.stopPropagation();\n}\n\nvar u = function () {\n  for (var t = arguments.length, e = new Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n  return e.filter(Boolean).join(\" \").trim();\n};\n\nfunction c(t, e) {\n  t && t.classList && (Array.isArray(e) ? e : [e]).forEach(function (e) {\n    t.classList.contains(e) || t.classList.add(e);\n  });\n}\n\nfunction l(t, e) {\n  t && t.classList && (Array.isArray(e) ? e : [e]).forEach(function (e) {\n    t.classList.contains(e) && t.classList.remove(e);\n  });\n}\n\nvar h,\n    p = 13,\n    f = 40,\n    d = 38,\n    m = [p, 27, f, d, 37, 39],\n    v = function () {\n  function t(t) {\n    var e = this,\n        n = t.handleSubmit,\n        r = t.searchLabel,\n        o = t.classNames,\n        i = void 0 === o ? {} : o;\n    this.hasError = !1, this.container = s(\"div\", u(\"geosearch\", i.container)), this.form = s(\"form\", [\"\", i.form].join(\" \"), this.container, {\n      autocomplete: \"none\",\n      onClick: a,\n      onDblClick: a,\n      touchStart: a,\n      touchEnd: a\n    }), this.input = s(\"input\", [\"glass\", i.input].join(\" \"), this.form, {\n      type: \"text\",\n      placeholder: r || \"search\",\n      onInput: this.onInput,\n      onKeyUp: function (t) {\n        return e.onKeyUp(t);\n      },\n      onKeyPress: function (t) {\n        return e.onKeyPress(t);\n      },\n      onFocus: this.onFocus,\n      onBlur: this.onBlur,\n      onClick: function () {\n        e.input.focus(), e.input.dispatchEvent(new Event(\"focus\"));\n      }\n    }), this.handleSubmit = n;\n  }\n\n  var e = t.prototype;\n  return e.onFocus = function () {\n    c(this.form, \"active\");\n  }, e.onBlur = function () {\n    l(this.form, \"active\");\n  }, e.onSubmit = function (t) {\n    try {\n      var e = this;\n      return a(t), l(n = e.container, \"error\"), c(n, \"pending\"), Promise.resolve(e.handleSubmit({\n        query: e.input.value\n      })).then(function () {\n        l(e.container, \"pending\");\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n\n    var n;\n  }, e.onInput = function () {\n    this.hasError && (l(this.container, \"error\"), this.hasError = !1);\n  }, e.onKeyUp = function (t) {\n    27 === t.keyCode && (l(this.container, [\"pending\", \"active\"]), this.input.value = \"\", document.body.focus(), document.body.blur());\n  }, e.onKeyPress = function (t) {\n    t.keyCode === p && this.onSubmit(t);\n  }, e.setQuery = function (t) {\n    this.input.value = t;\n  }, t;\n}(),\n    y = function () {\n  function t(t) {\n    var e = this,\n        n = t.handleClick,\n        r = t.classNames,\n        o = void 0 === r ? {} : r;\n    this.selected = -1, this.results = [], this.onClick = function (t) {\n      if (\"function\" == typeof e.handleClick) {\n        var n = t.target;\n\n        if (n && e.container.contains(n) && n.hasAttribute(\"data-key\")) {\n          var r = Number(n.getAttribute(\"data-key\"));\n          e.handleClick({\n            result: e.results[r]\n          });\n        }\n      }\n    }, this.handleClick = n, this.container = s(\"div\", u(\"results\", o.container)), this.container.addEventListener(\"click\", this.onClick, !0), this.resultItem = s(\"div\", u(o.item));\n  }\n\n  var e = t.prototype;\n  return e.render = function (t) {\n    var e = this;\n    void 0 === t && (t = []), this.clear(), t.forEach(function (t, n) {\n      var r = e.resultItem.cloneNode(!0);\n      r.setAttribute(\"data-key\", \"\" + n), r.innerHTML = t.label, e.container.appendChild(r);\n    }), t.length > 0 && (c(this.container.parentElement, \"open\"), c(this.container, \"active\")), this.results = t;\n  }, e.select = function (t) {\n    return Array.from(this.container.children).forEach(function (e, n) {\n      return n === t ? c(e, \"active\") : l(e, \"active\");\n    }), this.selected = t, this.results[t];\n  }, e.count = function () {\n    return this.results ? this.results.length : 0;\n  }, e.clear = function () {\n    for (this.selected = -1; this.container.lastChild;) this.container.removeChild(this.container.lastChild);\n\n    l(this.container.parentElement, \"open\"), l(this.container, \"active\");\n  }, t;\n}(),\n    g = {\n  position: \"topleft\",\n  style: \"button\",\n  showMarker: !0,\n  showPopup: !1,\n  popupFormat: function (t) {\n    return \"\" + t.result.label;\n  },\n  marker: {\n    icon: t && t.Icon ? new t.Icon.Default() : void 0,\n    draggable: !1\n  },\n  maxMarkers: 1,\n  maxSuggestions: 5,\n  retainZoomLevel: !1,\n  animateZoom: !0,\n  searchLabel: \"Enter address\",\n  notFoundMessage: \"Sorry, that address could not be found.\",\n  messageHideDelay: 3e3,\n  zoomLevel: 18,\n  classNames: {\n    container: \"leaflet-bar leaflet-control leaflet-control-geosearch\",\n    button: \"leaflet-bar-part leaflet-bar-part-single\",\n    resetButton: \"reset\",\n    msgbox: \"leaflet-bar message\",\n    form: \"\",\n    input: \"\"\n  },\n  autoComplete: !0,\n  autoCompleteDelay: 250,\n  autoClose: !1,\n  keepResult: !1\n},\n    b = \"Leaflet must be loaded before instantiating the GeoSearch control\",\n    E = {\n  options: e({}, g),\n  classNames: e({}, g.classNames),\n  initialize: function (n) {\n    var r,\n        o,\n        i,\n        a,\n        u = this;\n    if (!t) throw new Error(b);\n    if (!n.provider) throw new Error(\"Provider is missing from options\");\n    this.options = e({}, this.options, {}, n), this.classNames = e({}, this.classNames, {}, n.classNames), this.markers = new t.FeatureGroup(), this.classNames.container += \" leaflet-geosearch-\" + this.options.style, this.searchElement = new v({\n      searchLabel: this.options.searchLabel,\n      classNames: {\n        container: this.classNames.container,\n        form: this.classNames.form,\n        input: this.classNames.input\n      },\n      handleSubmit: function (t) {\n        return u.onSubmit(t);\n      }\n    }), this.button = s(\"a\", this.classNames.button, this.searchElement.container, {\n      title: this.options.searchLabel,\n      href: \"#\",\n      onClick: function (t) {\n        return u.onClick(t);\n      }\n    }), t.DomEvent.disableClickPropagation(this.button), this.resetButton = s(\"a\", this.classNames.resetButton, this.searchElement.form, {\n      text: \"Ã—\",\n      href: \"#\",\n      onClick: function () {\n        return u.clearResults(null, !0);\n      }\n    }), t.DomEvent.disableClickPropagation(this.resetButton), this.options.autoComplete && (this.resultList = new y({\n      handleClick: function (t) {\n        var e = t.result;\n        u.searchElement.input.value = e.label, u.onSubmit({\n          query: e.label,\n          data: e\n        });\n      }\n    }), this.searchElement.form.appendChild(this.resultList.container), this.searchElement.input.addEventListener(\"keyup\", (r = function (t) {\n      return u.autoSearch(t);\n    }, void 0 === (o = this.options.autoCompleteDelay) && (o = 250), void 0 === i && (i = !1), function () {\n      for (var t = arguments.length, e = new Array(t), n = 0; n < t; n++) e[n] = arguments[n];\n\n      a && clearTimeout(a), a = setTimeout(function () {\n        a = null, i || r.apply(void 0, e);\n      }, o), i && !a && r.apply(void 0, e);\n    }), !0), this.searchElement.input.addEventListener(\"keydown\", function (t) {\n      return u.selectResult(t);\n    }, !0), this.searchElement.input.addEventListener(\"keydown\", function (t) {\n      return u.clearResults(t, !0);\n    }, !0)), this.searchElement.form.addEventListener(\"click\", function (t) {\n      t.preventDefault();\n    }, !1);\n  },\n  onAdd: function (e) {\n    var n = this.options,\n        r = n.showMarker,\n        o = n.style;\n\n    if (this.map = e, r && this.markers.addTo(e), \"bar\" === o) {\n      var i = e.getContainer().querySelector(\".leaflet-control-container\");\n      this.container = s(\"div\", \"leaflet-control-geosearch leaflet-geosearch-bar\"), this.container.appendChild(this.searchElement.form), i.appendChild(this.container);\n    }\n\n    return t.DomEvent.disableClickPropagation(this.searchElement.form), this.searchElement.container;\n  },\n  onRemove: function () {\n    var t;\n    return null == (t = this.container) || t.remove(), this;\n  },\n  onClick: function (t) {\n    t.preventDefault(), t.stopPropagation();\n    var e = this.searchElement,\n        n = e.container,\n        r = e.input;\n    n.classList.contains(\"active\") ? (l(n, \"active\"), this.clearResults()) : (c(n, \"active\"), r.focus());\n  },\n  selectResult: function (t) {\n    if (-1 !== [p, f, d].indexOf(t.keyCode)) if (t.preventDefault(), t.keyCode !== p) {\n      var e = this.resultList.count() - 1;\n\n      if (!(e < 0)) {\n        var n = this.resultList.selected,\n            r = t.keyCode === f ? n + 1 : n - 1,\n            o = this.resultList.select(r < 0 ? e : r > e ? 0 : r);\n        this.searchElement.input.value = o.label;\n      }\n    } else {\n      var i = this.resultList.select(this.resultList.selected);\n      this.onSubmit({\n        query: this.searchElement.input.value,\n        data: i\n      });\n    }\n  },\n  clearResults: function (t, e) {\n    if (void 0 === e && (e = !1), !t || 27 === t.keyCode) {\n      var n = this.options,\n          r = n.autoComplete;\n      !e && n.keepResult || (this.searchElement.input.value = \"\", this.markers.clearLayers()), r && this.resultList.clear();\n    }\n  },\n  autoSearch: function (t) {\n    try {\n      var e = this;\n      if (m.indexOf(t.keyCode) > -1) return Promise.resolve();\n\n      var n = t.target.value,\n          r = e.options.provider,\n          o = function () {\n        if (n.length) return Promise.resolve(r.search({\n          query: n\n        })).then(function (t) {\n          t = t.slice(0, e.options.maxSuggestions), e.resultList.render(t);\n        });\n        e.resultList.clear();\n      }();\n\n      return Promise.resolve(o && o.then ? o.then(function () {}) : void 0);\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  },\n  onSubmit: function (t) {\n    try {\n      var e = this;\n      return Promise.resolve(e.options.provider.search(t)).then(function (n) {\n        n && n.length > 0 && e.showResult(n[0], t);\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  },\n  showResult: function (t, e) {\n    var n = this.options.autoClose,\n        r = Object.keys(this.markers._layers);\n    r.length >= this.options.maxMarkers && this.markers.removeLayer(r[0]);\n    var o = this.addMarker(t, e);\n    this.centerMap(t), this.map.fireEvent(\"geosearch/showlocation\", {\n      location: t,\n      marker: o\n    }), n && this.closeResults();\n  },\n  closeResults: function () {\n    var t = this.searchElement.container;\n    t.classList.contains(\"active\") && l(t, \"active\"), this.clearResults();\n  },\n  addMarker: function (e, n) {\n    var r = this,\n        o = this.options,\n        i = o.marker,\n        s = o.showPopup,\n        a = o.popupFormat,\n        u = new t.Marker([e.y, e.x], i),\n        c = e.label;\n    return \"function\" == typeof a && (c = a({\n      query: n,\n      result: e\n    })), u.bindPopup(c), this.markers.addLayer(u), s && u.openPopup(), i.draggable && u.on(\"dragend\", function (t) {\n      r.map.fireEvent(\"geosearch/marker/dragend\", {\n        location: u.getLatLng(),\n        event: t\n      });\n    }), u;\n  },\n  centerMap: function (e) {\n    var n = this.options,\n        r = n.retainZoomLevel,\n        o = n.animateZoom,\n        i = e.bounds ? new t.LatLngBounds(e.bounds) : new t.LatLng(e.y, e.x).toBounds(10),\n        s = i.isValid() ? i : this.markers.getBounds();\n    !r && i.isValid() ? this.map.fitBounds(s, {\n      animate: o\n    }) : this.map.setView(s.getCenter(), this.getZoom(), {\n      animate: o\n    });\n  },\n  getZoom: function () {\n    var t = this.options,\n        e = t.zoomLevel;\n    return t.retainZoomLevel ? this.map.getZoom() : e;\n  }\n};\n\nfunction L() {\n  if (!t) throw new Error(b);\n\n  for (var e = t.Control.extend(E), n = arguments.length, r = new Array(n), o = 0; o < n; o++) r[o] = arguments[o];\n\n  return i(e, r);\n}\n\n!function (t) {\n  t[t.SEARCH = 0] = \"SEARCH\", t[t.REVERSE = 1] = \"REVERSE\";\n}(h || (h = {}));\n\nvar k = function () {\n  function t(t) {\n    void 0 === t && (t = {}), this.options = t;\n  }\n\n  var n = t.prototype;\n  return n.getParamString = function (t) {\n    void 0 === t && (t = {});\n    var n = e({}, this.options.params, {}, t);\n    return Object.keys(n).map(function (t) {\n      return encodeURIComponent(t) + \"=\" + encodeURIComponent(n[t]);\n    }).join(\"&\");\n  }, n.getUrl = function (t, e) {\n    return t + \"?\" + this.getParamString(e);\n  }, n.search = function (t) {\n    try {\n      var e = this,\n          n = e.endpoint({\n        query: t.query,\n        type: h.SEARCH\n      });\n      return Promise.resolve(fetch(n)).then(function (t) {\n        return Promise.resolve(t.json()).then(function (t) {\n          return e.parse({\n            data: t\n          });\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, t;\n}(),\n    w = function (t) {\n  function r() {\n    return t.apply(this, arguments) || this;\n  }\n\n  n(r, t);\n  var o = r.prototype;\n  return o.endpoint = function () {\n    return \"https://places-dsn.algolia.net/1/places/query\";\n  }, o.findBestMatchLevelIndex = function (t) {\n    var e = t.find(function (t) {\n      return \"full\" === t.matchLevel;\n    }) || t.find(function (t) {\n      return \"partial\" === t.matchLevel;\n    });\n    return e ? t.indexOf(e) : 0;\n  }, o.getLabel = function (t) {\n    var e, n, r, o;\n    return [null == (e = t.locale_names) ? void 0 : e.default[this.findBestMatchLevelIndex(t._highlightResult.locale_names.default)], null == (n = t.city) ? void 0 : n.default[this.findBestMatchLevelIndex(t._highlightResult.city.default)], t.administrative[this.findBestMatchLevelIndex(t._highlightResult.administrative)], null == (r = t.postcode) ? void 0 : r[this.findBestMatchLevelIndex(t._highlightResult.postcode)], null == (o = t.country) ? void 0 : o.default].filter(Boolean).join(\", \");\n  }, o.parse = function (t) {\n    var e = this;\n    return t.data.hits.map(function (t) {\n      return {\n        x: t._geoloc.lng,\n        y: t._geoloc.lat,\n        label: e.getLabel(t),\n        bounds: null,\n        raw: t\n      };\n    });\n  }, o.search = function (t) {\n    var n = t.query;\n\n    try {\n      var r = this,\n          o = \"string\" == typeof n ? {\n        query: n\n      } : n;\n      return Promise.resolve(fetch(r.endpoint(), {\n        method: \"POST\",\n        body: JSON.stringify(e({}, r.options.params, {}, o))\n      })).then(function (t) {\n        return Promise.resolve(t.json()).then(function (t) {\n          return r.parse({\n            data: t\n          });\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, r;\n}(k),\n    C = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://dev.virtualearth.net/REST/v1/Locations\", e;\n  }\n\n  n(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        n = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return n.jsonp = t.jsonp, this.getUrl(this.searchUrl, n);\n  }, r.parse = function (t) {\n    return 0 === t.data.resourceSets.length ? [] : t.data.resourceSets[0].resources.map(function (t) {\n      return {\n        x: t.point.coordinates[1],\n        y: t.point.coordinates[0],\n        label: t.address.formattedAddress,\n        bounds: [[t.bbox[0], t.bbox[1]], [t.bbox[2], t.bbox[3]]],\n        raw: t\n      };\n    });\n  }, r.search = function (t) {\n    var e,\n        n,\n        r,\n        o = t.query;\n\n    try {\n      var i = this,\n          a = \"BING_JSONP_CB_\" + Date.now();\n      return Promise.resolve((e = i.endpoint({\n        query: o,\n        jsonp: a\n      }), n = a, r = s(\"script\", null, document.body), r.setAttribute(\"type\", \"text/javascript\"), new Promise(function (t) {\n        window[n] = function (e) {\n          r.remove(), delete window[n], t(e);\n        }, r.setAttribute(\"src\", e);\n      }))).then(function (t) {\n        return i.parse({\n          data: t\n        });\n      });\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(k),\n    x = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find\", e;\n  }\n\n  n(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        n = \"string\" == typeof e ? {\n      text: e\n    } : e;\n    return n.f = \"json\", this.getUrl(this.searchUrl, n);\n  }, r.parse = function (t) {\n    return t.data.locations.map(function (t) {\n      return {\n        x: t.feature.geometry.x,\n        y: t.feature.geometry.y,\n        label: t.name,\n        bounds: [[t.extent.ymin, t.extent.xmin], [t.extent.ymax, t.extent.xmax]],\n        raw: t\n      };\n    });\n  }, e;\n}(k),\n    P = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://maps.googleapis.com/maps/api/geocode/json\", e;\n  }\n\n  n(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(this.searchUrl, \"string\" == typeof e ? {\n      address: e\n    } : e);\n  }, r.parse = function (t) {\n    return t.data.results.map(function (t) {\n      return {\n        x: t.geometry.location.lng,\n        y: t.geometry.location.lat,\n        label: t.formatted_address,\n        bounds: [[t.geometry.viewport.southwest.lat, t.geometry.viewport.southwest.lng], [t.geometry.viewport.northeast.lat, t.geometry.viewport.northeast.lng]],\n        raw: t\n      };\n    });\n  }, e;\n}(k),\n    R = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://geocode.search.hereapi.com/v1/geocode\", e;\n  }\n\n  n(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query;\n    return this.getUrl(this.searchUrl, \"string\" == typeof e ? {\n      q: e\n    } : e);\n  }, r.parse = function (t) {\n    return t.data.items.map(function (t) {\n      return {\n        x: t.position.lng,\n        y: t.position.lat,\n        label: t.address.label,\n        bounds: null,\n        raw: t\n      };\n    });\n  }, e;\n}(k),\n    S = function (t) {\n  function e(e) {\n    var n;\n    void 0 === e && (e = {});\n    var r = \"https://nominatim.openstreetmap.org\";\n    return (n = t.call(this, e) || this).searchUrl = e.searchUrl || r + \"/search\", n.reverseUrl = e.reverseUrl || r + \"/reverse\", n;\n  }\n\n  n(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        n = t.type,\n        r = \"string\" == typeof e ? {\n      q: e\n    } : e;\n\n    switch (r.format = \"json\", n) {\n      case h.REVERSE:\n        return this.getUrl(this.reverseUrl, r);\n\n      default:\n        return this.getUrl(this.searchUrl, r);\n    }\n  }, r.parse = function (t) {\n    return (Array.isArray(t.data) ? t.data : [t.data]).map(function (t) {\n      return {\n        x: Number(t.lon),\n        y: Number(t.lat),\n        label: t.display_name,\n        bounds: [[parseFloat(t.boundingbox[0]), parseFloat(t.boundingbox[2])], [parseFloat(t.boundingbox[1]), parseFloat(t.boundingbox[3])]],\n        raw: t\n      };\n    });\n  }, e;\n}(k),\n    U = function (t) {\n  function r(n) {\n    return t.call(this, e({}, n, {\n      searchUrl: \"https://locationiq.org/v1/search.php\",\n      reverseUrl: \"https://locationiq.org/v1/reverse.php\"\n    })) || this;\n  }\n\n  return n(r, t), r;\n}(S),\n    j = function (t) {\n  function e() {\n    var e;\n    return (e = t.apply(this, arguments) || this).searchUrl = \"https://api.opencagedata.com/geocode/v1/json\", e;\n  }\n\n  n(e, t);\n  var r = e.prototype;\n  return r.endpoint = function (t) {\n    var e = t.query,\n        n = \"string\" == typeof e ? {\n      q: e\n    } : e;\n    return n.format = \"json\", this.getUrl(this.searchUrl, n);\n  }, r.parse = function (t) {\n    return t.data.results.map(function (t) {\n      return {\n        x: t.geometry.lng,\n        y: t.geometry.lat,\n        label: t.formatted,\n        bounds: [[t.bounds.southwest.lat, t.bounds.southwest.lng], [t.bounds.northeast.lat, t.bounds.northeast.lng]],\n        raw: t\n      };\n    });\n  }, r.search = function (e) {\n    try {\n      return Promise.resolve(e.query.length < 2 ? [] : t.prototype.search.call(this, e));\n    } catch (t) {\n      return Promise.reject(t);\n    }\n  }, e;\n}(k);\n\nexport { w as AlgoliaProvider, C as BingProvider, x as EsriProvider, L as GeoSearchControl, P as GoogleProvider, R as HereProvider, k as JsonProvider, U as LocationIQProvider, j as OpenCageProvider, S as OpenStreetMapProvider, L as SearchControl, v as SearchElement };","map":{"version":3,"sources":["../src/domUtils.ts","../src/providers/provider.ts","../src/constants.ts","../src/SearchElement.ts","../src/resultList.ts","../src/SearchControl.ts","../src/lib/debounce.ts","../src/providers/algoliaProvider.ts","../src/providers/bingProvider.ts","../src/providers/esriProvider.ts","../src/providers/googleProvider.ts","../src/providers/hereProvider.ts","../src/providers/openStreetMapProvider.ts","../src/providers/locationIQProvider.ts","../src/providers/openCageProvider.ts"],"names":["createElement","element","className","parent","attributes","el","document","Object","keys","forEach","key","type","indexOf","substr","toLowerCase","addEventListener","innerHTML","innerText","setAttribute","appendChild","stopPropagation","event","preventDefault","url","cb","script","body","Promise","resolve","window","json","remove","cx","classNames","filter","Boolean","join","trim","addClassName","classList","Array","isArray","name","contains","add","removeClassName","RequestType","AbstractProvider","options","this","getParamString","params","set","map","encodeURIComponent","getUrl","search","endpoint","query","SEARCH","request","fetch","parse","data","ENTER_KEY","ARROW_DOWN_KEY","ARROW_UP_KEY","SPECIAL_KEYS","SearchElement","handleSubmit","searchLabel","container","form","autocomplete","onClick","onDblClick","touchStart","touchEnd","input","placeholder","onInput","onKeyUp","e","_this","onKeyPress","onFocus","onBlur","focus","dispatchEvent","Event","onSubmit","_this3","value","hasError","keyCode","blur","setQuery","ResultList","handleClick","resultItem","item","render","results","clear","result","idx","child","_this2","cloneNode","label","length","parentElement","select","index","from","children","selected","count","lastChild","removeChild","target","hasAttribute","Number","getAttribute","defaultOptions","position","style","showMarker","showPopup","popupFormat","marker","icon","L","Icon","Default","undefined","draggable","maxMarkers","maxSuggestions","retainZoomLevel","animateZoom","notFoundMessage","messageHideDelay","zoomLevel","button","resetButton","msgbox","autoComplete","autoCompleteDelay","autoClose","keepResult","UNINITIALIZED_ERR","Control","initialize","Error","provider","markers","FeatureGroup","searchElement","title","href","DomEvent","disableClickPropagation","text","clearResults","resultList","autoSearch","selectResult","onAdd","addTo","root","getContainer","querySelector","onRemove","max","next","force","clearLayers","slice","_this5","showResult","_layers","removeLayer","addMarker","centerMap","fireEvent","location","closeResults","Marker","y","x","popupLabel","bindPopup","addLayer","openPopup","on","args","_this6","getLatLng","resultBounds","bounds","LatLngBounds","LatLng","toBounds","isValid","getBounds","fitBounds","animate","setView","getCenter","getZoom","SearchControl","LControl","extend","wait","immediate","timeout","clearTimeout","setTimeout","Provider","findBestMatchLevelIndex","vms","match","find","vm","matchLevel","getLabel","locale_names","_highlightResult","city","administrative","postcode","country","response","hits","r","_geoloc","lng","lat","raw","method","JSON","stringify","BingProvider","jsonp","q","searchUrl","resourceSets","resources","point","coordinates","address","formattedAddress","bbox","Date","now","EsriProvider","f","locations","feature","geometry","extent","ymin","xmin","ymax","xmax","GoogleProvider","formatted_address","viewport","southwest","northeast","HereProvider","items","OpenStreetMapProvider","host","reverseUrl","format","REVERSE","lon","display_name","parseFloat","boundingbox","LocationIQProvider","OpenCageProvider","formatted"],"mappings":"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","sourcesContent":["export function createElement<T extends HTMLElement = HTMLElement>(\n  element: string,\n  className: string | null = '',\n  parent?: Element | null,\n  attributes: { [key: string]: string | ((event: any) => void) } = {},\n): T {\n  const el = document.createElement(element) as T;\n\n  if (className) {\n    el.className = className;\n  }\n\n  Object.keys(attributes).forEach((key) => {\n    if (typeof attributes[key] === 'function') {\n      // IE doesn't support startsWith\n      const type = (key.indexOf('on') === 0\n        ? key.substr(2).toLowerCase()\n        : key) as keyof HTMLElementEventMap;\n      el.addEventListener(type, attributes[key] as () => void);\n    } else if (key === 'html') {\n      el.innerHTML = attributes[key] as string;\n    } else if (key === 'text') {\n      el.innerText = attributes[key] as string;\n    } else {\n      el.setAttribute(key, attributes[key] as string);\n    }\n  });\n\n  if (parent) {\n    parent.appendChild(el);\n  }\n\n  return el;\n}\n\nexport function stopPropagation(event: Event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nexport function createScriptElement<T = object>(\n  url: string,\n  cb: string,\n): Promise<T> {\n  const script = createElement('script', null, document.body);\n  script.setAttribute('type', 'text/javascript');\n\n  return new Promise((resolve) => {\n    (window as any)[cb] = (json: T): void => {\n      script.remove();\n      delete (window as any)[cb];\n      resolve(json);\n    };\n\n    script.setAttribute('src', url);\n  });\n}\n\nexport const cx = (...classNames: (string | undefined)[]): string =>\n  classNames.filter(Boolean).join(' ').trim();\n\nexport function addClassName(\n  element: Element | null,\n  className: string | string[],\n): void {\n  if (!element || !element.classList) {\n    return;\n  }\n\n  // IE doesn't support adding multiple classes at once :(\n  const classNames = Array.isArray(className) ? className : [className];\n  classNames.forEach((name) => {\n    if (!element.classList.contains(name)) {\n      element.classList.add(name);\n    }\n  });\n}\n\nexport function removeClassName(\n  element: Element | null,\n  className: string | string[],\n): void {\n  if (!element || !element.classList) {\n    return;\n  }\n\n  // IE doesn't support removing multiple classes at once :(\n  const classNames = Array.isArray(className) ? className : [className];\n  classNames.forEach((name) => {\n    if (element.classList.contains(name)) {\n      element.classList.remove(name);\n    }\n  });\n}\n\nexport function replaceClassName(\n  element: Element,\n  find: string,\n  replace: string,\n): void {\n  removeClassName(element, find);\n  addClassName(element, replace);\n}\n","export type PointTuple = [number, number];\nexport type BoundsTuple = [PointTuple, PointTuple];\n\nexport interface LatLng {\n  lat: number;\n  lng: number;\n}\n\nexport interface SearchResult<TRawResult = any> {\n  x: number;\n  y: number;\n  label: string;\n  bounds: BoundsTuple | null;\n  raw: TRawResult;\n}\n\nexport interface ProviderParams {\n  [key: string]: string | number | boolean;\n}\n\nexport interface ProviderOptions {\n  params?: ProviderParams;\n}\n\nexport enum RequestType {\n  SEARCH,\n  REVERSE,\n}\n\nexport interface EndpointArgument {\n  query: string | { [key: string]: string | number | boolean };\n  type?: RequestType;\n}\n\nexport interface SearchArgument {\n  query: string;\n}\n\nexport interface ParseArgument<TData> {\n  data: TData;\n}\n\nexport interface Provider<TRequestResult, TRawResult> {\n  options: ProviderOptions;\n\n  endpoint(options: EndpointArgument): string;\n  getParamString(params: ProviderParams): string;\n  parse(response: ParseArgument<TRequestResult>): SearchResult<TRawResult>[];\n  search(options: SearchArgument): Promise<SearchResult<TRawResult>[]>;\n}\n\nexport default abstract class AbstractProvider<\n  TRequestResult = any,\n  TRawResult = any\n> implements Provider<TRequestResult, TRawResult> {\n  options: ProviderOptions;\n\n  constructor(options: ProviderOptions = {}) {\n    this.options = options;\n  }\n\n  abstract endpoint(options: EndpointArgument): string;\n  abstract parse(\n    response: ParseArgument<TRequestResult>,\n  ): SearchResult<TRawResult>[];\n\n  getParamString(params: ProviderParams = {}): string {\n    const set = { ...this.options.params, ...params };\n    return Object.keys(set)\n      .map(\n        (key) => `${encodeURIComponent(key)}=${encodeURIComponent(set[key])}`,\n      )\n      .join('&');\n  }\n\n  getUrl(url: string, params?: ProviderParams): string {\n    return `${url}?${this.getParamString(params)}`;\n  }\n\n  async search(options: SearchArgument): Promise<SearchResult<TRawResult>[]> {\n    const url = this.endpoint({\n      query: options.query,\n      type: RequestType.SEARCH,\n    });\n\n    const request = await fetch(url);\n    const json: TRequestResult = await request.json();\n    return this.parse({ data: json });\n  }\n}\n","export const ENTER_KEY = 13;\nexport const ESCAPE_KEY = 27;\nexport const ARROW_DOWN_KEY = 40;\nexport const ARROW_UP_KEY = 38;\nexport const ARROW_LEFT_KEY = 37;\nexport const ARROW_RIGHT_KEY = 39;\n\nexport const SPECIAL_KEYS = [\n  ENTER_KEY,\n  ESCAPE_KEY,\n  ARROW_DOWN_KEY,\n  ARROW_UP_KEY,\n  ARROW_LEFT_KEY,\n  ARROW_RIGHT_KEY,\n];\n","import {\n  createElement,\n  addClassName,\n  removeClassName,\n  cx,\n  stopPropagation,\n  replaceClassName,\n} from './domUtils';\n\nimport { ESCAPE_KEY, ENTER_KEY } from './constants';\n\ninterface SearchElementProps {\n  searchLabel?: string;\n  handleSubmit: (args: { query: string }) => void;\n  classNames?: {\n    container?: string;\n    form?: string;\n    input?: string;\n  };\n}\n\nexport default class SearchElement {\n  container: HTMLDivElement;\n  form: HTMLFormElement;\n  input: HTMLInputElement;\n  handleSubmit: (args: { query: string }) => void;\n  hasError = false;\n\n  constructor({\n    handleSubmit,\n    searchLabel,\n    classNames = {},\n  }: SearchElementProps) {\n    this.container = createElement<HTMLDivElement>(\n      'div',\n      cx('geosearch', classNames.container),\n    );\n\n    this.form = createElement<HTMLFormElement>(\n      'form',\n      ['', classNames.form].join(' '),\n      this.container,\n      {\n        autocomplete: 'none',\n        onClick: stopPropagation,\n        onDblClick: stopPropagation,\n        touchStart: stopPropagation,\n        touchEnd: stopPropagation,\n      },\n    );\n\n    this.input = createElement<HTMLInputElement>(\n      'input',\n      ['glass', classNames.input].join(' '),\n      this.form,\n      {\n        type: 'text',\n        placeholder: searchLabel || 'search',\n        onInput: this.onInput,\n        onKeyUp: (e) => this.onKeyUp(e),\n        onKeyPress: (e) => this.onKeyPress(e),\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n\n        // For some reason, leaflet is blocking the 'touchstart', manually give\n        // focus to the input onClick\n        // > Ignored attempt to cancel a touchstart event with cancelable=false,\n        // > for example because scrolling is in progress and cannot be interrupted.\n        onClick: () => {\n          this.input.focus();\n          this.input.dispatchEvent(new Event('focus'));\n        },\n      },\n    );\n\n    this.handleSubmit = handleSubmit;\n  }\n\n  onFocus(): void {\n    addClassName(this.form, 'active');\n  }\n\n  onBlur(): void {\n    removeClassName(this.form, 'active');\n  }\n\n  async onSubmit(event: Event): Promise<void> {\n    stopPropagation(event);\n    replaceClassName(this.container, 'error', 'pending');\n\n    await this.handleSubmit({ query: this.input.value });\n    removeClassName(this.container, 'pending');\n  }\n\n  onInput(): void {\n    if (!this.hasError) {\n      return;\n    }\n\n    removeClassName(this.container, 'error');\n    this.hasError = false;\n  }\n\n  onKeyUp(event: KeyboardEvent): void {\n    if (event.keyCode !== ESCAPE_KEY) {\n      return;\n    }\n\n    removeClassName(this.container, ['pending', 'active']);\n\n    this.input.value = '';\n\n    document.body.focus();\n    document.body.blur();\n  }\n\n  onKeyPress(event: KeyboardEvent): void {\n    if (event.keyCode !== ENTER_KEY) {\n      return;\n    }\n\n    this.onSubmit(event);\n  }\n\n  setQuery(query: string): void {\n    this.input.value = query;\n  }\n}\n","import { createElement, addClassName, removeClassName, cx } from './domUtils';\nimport { SearchResult } from './providers/provider';\n\ninterface ResultListProps {\n  handleClick: (args: { result: SearchResult }) => void;\n  classNames?: {\n    container?: string;\n    item?: string;\n  };\n}\n\nexport default class ResultList {\n  handleClick?: (args: { result: SearchResult }) => void;\n  selected = -1;\n  results: SearchResult[] = [];\n\n  container: HTMLDivElement;\n  resultItem: HTMLDivElement;\n\n  constructor({ handleClick, classNames = {} }: ResultListProps) {\n    this.handleClick = handleClick;\n\n    this.container = createElement<HTMLDivElement>(\n      'div',\n      cx('results', classNames.container),\n    );\n    this.container.addEventListener('click', this.onClick, true);\n\n    this.resultItem = createElement<HTMLDivElement>('div', cx(classNames.item));\n  }\n\n  render(results: SearchResult[] = []): void {\n    this.clear();\n\n    results.forEach((result, idx) => {\n      const child = this.resultItem.cloneNode(true) as HTMLDivElement;\n      child.setAttribute('data-key', `${idx}`);\n      child.innerHTML = result.label;\n      this.container.appendChild(child);\n    });\n\n    if (results.length > 0) {\n      addClassName(this.container.parentElement, 'open');\n      addClassName(this.container, 'active');\n    }\n\n    this.results = results;\n  }\n\n  select(index: number): SearchResult {\n    // eslint-disable-next-line no-confusing-arrow\n    Array.from(this.container.children).forEach((child, idx) =>\n      idx === index\n        ? addClassName(child, 'active')\n        : removeClassName(child, 'active'),\n    );\n\n    this.selected = index;\n    return this.results[index];\n  }\n\n  count(): number {\n    return this.results ? this.results.length : 0;\n  }\n\n  clear(): void {\n    this.selected = -1;\n\n    while (this.container.lastChild) {\n      this.container.removeChild(this.container.lastChild);\n    }\n\n    removeClassName(this.container.parentElement, 'open');\n    removeClassName(this.container, 'active');\n  }\n\n  onClick = (event: Event): void => {\n    if (typeof this.handleClick !== 'function') {\n      return;\n    }\n\n    const target = event.target as HTMLDivElement;\n    if (\n      !target ||\n      !this.container.contains(target) ||\n      !target.hasAttribute('data-key')\n    ) {\n      return;\n    }\n\n    const idx = Number(target.getAttribute('data-key'));\n    this.handleClick({ result: this.results[idx] });\n  };\n}\n","import L, { ControlPosition, FeatureGroup, MarkerOptions, Map } from 'leaflet';\nimport SearchElement from './SearchElement';\nimport ResultList from './resultList';\nimport debounce from './lib/debounce';\n\nimport {\n  createElement,\n  addClassName,\n  removeClassName,\n  stopPropagation,\n} from './domUtils';\nimport {\n  ENTER_KEY,\n  SPECIAL_KEYS,\n  ARROW_UP_KEY,\n  ARROW_DOWN_KEY,\n  ESCAPE_KEY,\n} from './constants';\nimport AbstractProvider, { SearchResult } from './providers/provider';\nimport { Provider } from './providers';\n\nconst defaultOptions: Omit<SearchControlProps, 'provider'> = {\n  position: 'topleft',\n  style: 'button',\n  showMarker: true,\n  showPopup: false,\n  popupFormat: ({ result }) => `${result.label}`,\n  marker: {\n    icon: L && L.Icon ? new L.Icon.Default() : undefined,\n    draggable: false,\n  },\n  maxMarkers: 1,\n  maxSuggestions: 5,\n  retainZoomLevel: false,\n  animateZoom: true,\n  searchLabel: 'Enter address',\n  notFoundMessage: 'Sorry, that address could not be found.',\n  messageHideDelay: 3000,\n  zoomLevel: 18,\n  classNames: {\n    container: 'leaflet-bar leaflet-control leaflet-control-geosearch',\n    button: 'leaflet-bar-part leaflet-bar-part-single',\n    resetButton: 'reset',\n    msgbox: 'leaflet-bar message',\n    form: '',\n    input: '',\n  },\n  autoComplete: true,\n  autoCompleteDelay: 250,\n  autoClose: false,\n  keepResult: false,\n};\n\nconst UNINITIALIZED_ERR =\n  'Leaflet must be loaded before instantiating the GeoSearch control';\n\ninterface SearchControlProps {\n  /** the provider to use for searching */\n  provider: Provider;\n  /** the leaflet position to render the element in */\n  position: ControlPosition;\n  /**\n   * the stye of the search element\n   * @default bar\n   **/\n  style: 'button' | 'bar';\n\n  marker: MarkerOptions;\n  maxMarkers: number;\n  showMarker: boolean;\n  showPopup: boolean;\n  popupFormat<T = any>(args: {\n    query: Selection;\n    result: SearchResult<T>;\n  }): string;\n\n  searchLabel: string;\n  notFoundMessage: string;\n  messageHideDelay: number;\n\n  animateZoom: boolean;\n  zoomLevel: number;\n  retainZoomLevel: boolean;\n\n  classNames: {\n    container: string;\n    button: string;\n    resetButton: string;\n    msgbox: string;\n    form: string;\n    input: string;\n  };\n\n  autoComplete: boolean;\n  autoCompleteDelay: number;\n  maxSuggestions: number;\n  autoClose: boolean;\n  keepResult: boolean;\n}\n\nexport type SearchControlOptions = Partial<SearchControlProps> & {\n  provider: Provider;\n};\n\ninterface Selection {\n  query: string;\n  data?: SearchResult;\n}\n\ninterface SearchControl {\n  options: Omit<SearchControlProps, 'provider'> & {\n    provider?: SearchControlProps['provider'];\n  };\n  markers: FeatureGroup;\n  searchElement: SearchElement;\n  resultList: ResultList;\n  classNames: SearchControlProps['classNames'];\n  container: HTMLDivElement;\n  input: HTMLInputElement;\n  button: HTMLAnchorElement;\n  resetButton: HTMLAnchorElement;\n  map: Map;\n\n  // [key: string]: any;\n  initialize(options: SearchControlProps): void;\n  onSubmit(result: Selection): void;\n  onClick(event: Event): void;\n  clearResults(event?: KeyboardEvent | null, force?: boolean): void;\n  autoSearch(event: KeyboardEvent): void;\n  selectResult(event: KeyboardEvent): void;\n  showResult(result: SearchResult, query: Selection): void;\n  addMarker(result: SearchResult, selection: Selection): void;\n  centerMap(result: SearchResult): void;\n  closeResults(): void;\n  getZoom(): number;\n  onAdd(map: Map): HTMLDivElement;\n  onRemove(): SearchControl;\n}\n\n// @ts-ignore\nconst Control: SearchControl = {\n  options: { ...defaultOptions },\n  classNames: { ...defaultOptions.classNames },\n\n  initialize(options: SearchControlOptions) {\n    if (!L) {\n      throw new Error(UNINITIALIZED_ERR);\n    }\n\n    if (!options.provider) {\n      throw new Error('Provider is missing from options');\n    }\n\n    // merge given options with control defaults\n    this.options = { ...this.options, ...options };\n    this.classNames = { ...this.classNames, ...options.classNames };\n\n    this.markers = new L.FeatureGroup();\n    this.classNames.container += ` leaflet-geosearch-${this.options.style}`;\n\n    this.searchElement = new SearchElement({\n      searchLabel: this.options.searchLabel,\n      classNames: {\n        container: this.classNames.container,\n        form: this.classNames.form,\n        input: this.classNames.input,\n      },\n      handleSubmit: (result) => this.onSubmit(result),\n    });\n\n    this.button = createElement<HTMLAnchorElement>(\n      'a',\n      this.classNames.button,\n      this.searchElement.container,\n      {\n        title: this.options.searchLabel,\n        href: '#',\n        onClick: (e) => this.onClick(e),\n      },\n    );\n\n    L.DomEvent.disableClickPropagation(this.button);\n\n    this.resetButton = createElement<HTMLAnchorElement>(\n      'a',\n      this.classNames.resetButton,\n      this.searchElement.form,\n      {\n        text: 'Ã—',\n        href: '#',\n        onClick: () => this.clearResults(null, true),\n      },\n    );\n\n    L.DomEvent.disableClickPropagation(this.resetButton);\n\n    if (this.options.autoComplete) {\n      this.resultList = new ResultList({\n        handleClick: ({ result }): void => {\n          this.searchElement.input.value = result.label;\n          this.onSubmit({ query: result.label, data: result });\n        },\n      });\n\n      this.searchElement.form.appendChild(this.resultList.container);\n\n      this.searchElement.input.addEventListener(\n        'keyup',\n        debounce(\n          (e: KeyboardEvent) => this.autoSearch(e),\n          this.options.autoCompleteDelay,\n        ),\n        true,\n      );\n\n      this.searchElement.input.addEventListener(\n        'keydown',\n        (e: KeyboardEvent) => this.selectResult(e),\n        true,\n      );\n\n      this.searchElement.input.addEventListener(\n        'keydown',\n        (e: KeyboardEvent) => this.clearResults(e, true),\n        true,\n      );\n    }\n\n    this.searchElement.form.addEventListener(\n      'click',\n      (e) => {\n        e.preventDefault();\n      },\n      false,\n    );\n  },\n\n  onAdd(map: Map) {\n    const { showMarker, style } = this.options;\n\n    this.map = map;\n    if (showMarker) {\n      this.markers.addTo(map);\n    }\n\n    if (style === 'bar') {\n      const root = map\n        .getContainer()\n        .querySelector('.leaflet-control-container');\n\n      this.container = createElement<HTMLDivElement>(\n        'div',\n        'leaflet-control-geosearch leaflet-geosearch-bar',\n      );\n\n      this.container.appendChild(this.searchElement.form);\n      root!.appendChild(this.container);\n    }\n\n    L.DomEvent.disableClickPropagation(this.searchElement.form);\n    return this.searchElement.container;\n  },\n\n  onRemove() {\n    this.container?.remove();\n    return this;\n  },\n\n  onClick(event: Event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const { container, input } = this.searchElement;\n\n    if (container.classList.contains('active')) {\n      removeClassName(container, 'active');\n      this.clearResults();\n    } else {\n      addClassName(container, 'active');\n      input.focus();\n    }\n  },\n\n  selectResult(event) {\n    if (\n      [ENTER_KEY, ARROW_DOWN_KEY, ARROW_UP_KEY].indexOf(event.keyCode) === -1\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.keyCode === ENTER_KEY) {\n      const item = this.resultList.select(this.resultList.selected);\n      this.onSubmit({ query: this.searchElement.input.value, data: item });\n      return;\n    }\n\n    const max = this.resultList.count() - 1;\n    if (max < 0) {\n      return;\n    }\n\n    const { selected } = this.resultList;\n    const next = event.keyCode === ARROW_DOWN_KEY ? selected + 1 : selected - 1;\n    const idx = next < 0 ? max : next > max ? 0 : next;\n\n    const item = this.resultList.select(idx);\n    this.searchElement.input.value = item.label;\n  },\n\n  clearResults(event: KeyboardEvent | null, force = false) {\n    if (event && event.keyCode !== ESCAPE_KEY) {\n      return;\n    }\n\n    const { keepResult, autoComplete } = this.options;\n\n    if (force || !keepResult) {\n      this.searchElement.input.value = '';\n      this.markers.clearLayers();\n    }\n\n    if (autoComplete) {\n      this.resultList.clear();\n    }\n  },\n\n  async autoSearch(event) {\n    if (SPECIAL_KEYS.indexOf(event.keyCode) > -1) {\n      return;\n    }\n\n    const query = (event.target as HTMLInputElement).value;\n    const { provider } = this.options;\n\n    if (query.length) {\n      let results = await provider!.search({ query });\n      results = results.slice(0, this.options.maxSuggestions);\n      this.resultList.render(results);\n    } else {\n      this.resultList.clear();\n    }\n  },\n\n  async onSubmit(query) {\n    const { provider } = this.options;\n\n    const results = await provider!.search(query);\n\n    if (results && results.length > 0) {\n      this.showResult(results[0], query);\n    }\n  },\n\n  showResult(result, query) {\n    const { autoClose } = this.options;\n\n    // @ts-ignore\n    const markers = Object.keys(this.markers._layers);\n    if (markers.length >= this.options.maxMarkers) {\n      // @ts-ignore\n      this.markers.removeLayer(markers[0]);\n    }\n\n    const marker = this.addMarker(result, query);\n    this.centerMap(result);\n\n    this.map.fireEvent('geosearch/showlocation', {\n      location: result,\n      marker,\n    });\n\n    if (autoClose) {\n      this.closeResults();\n    }\n  },\n\n  closeResults() {\n    const { container } = this.searchElement;\n\n    if (container.classList.contains('active')) {\n      removeClassName(container, 'active');\n    }\n\n    this.clearResults();\n  },\n\n  addMarker(result, query) {\n    const { marker: options, showPopup, popupFormat } = this.options;\n    const marker = new L.Marker([result.y, result.x], options);\n    let popupLabel = result.label;\n\n    if (typeof popupFormat === 'function') {\n      popupLabel = popupFormat({ query, result });\n    }\n\n    marker.bindPopup(popupLabel);\n\n    this.markers.addLayer(marker);\n\n    if (showPopup) {\n      marker.openPopup();\n    }\n\n    if (options.draggable) {\n      marker.on('dragend', (args) => {\n        this.map.fireEvent('geosearch/marker/dragend', {\n          location: marker.getLatLng(),\n          event: args,\n        });\n      });\n    }\n\n    return marker;\n  },\n\n  centerMap(result) {\n    const { retainZoomLevel, animateZoom } = this.options;\n\n    const resultBounds = result.bounds\n      ? new L.LatLngBounds(result.bounds)\n      : new L.LatLng(result.y, result.x).toBounds(10);\n\n    const bounds = resultBounds.isValid()\n      ? resultBounds\n      : this.markers.getBounds();\n\n    if (!retainZoomLevel && resultBounds.isValid()) {\n      this.map.fitBounds(bounds, { animate: animateZoom });\n    } else {\n      this.map.setView(bounds.getCenter(), this.getZoom(), {\n        animate: animateZoom,\n      });\n    }\n  },\n\n  getZoom(): number {\n    const { retainZoomLevel, zoomLevel } = this.options;\n    return retainZoomLevel ? this.map.getZoom() : zoomLevel;\n  },\n};\n\nexport default function SearchControl(...options: any[]) {\n  if (!L) {\n    throw new Error(UNINITIALIZED_ERR);\n  }\n\n  const LControl = L.Control.extend(Control);\n  return new LControl(...options);\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nexport default function debounce(\n  cb: (...args: any[]) => void,\n  wait = 250,\n  immediate = false,\n): (...args: any[]) => void {\n  let timeout: ReturnType<typeof setTimeout> | null;\n\n  return (...args: any[]): void => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(() => {\n      timeout = null;\n\n      if (!immediate) {\n        cb(...args);\n      }\n    }, wait);\n\n    if (immediate && !timeout) {\n      cb(...args);\n    }\n  };\n}\n","import AbstractProvider, {\n  LatLng,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\n\ninterface RequestResult {\n  hits: RawResult[];\n}\n\ninterface ValueMatch {\n  value: string;\n  matchLevel: string;\n  matchedWords: string[];\n  fullyHighlighted?: boolean;\n}\n\ninterface RawResult {\n  country: { [key: string]: string };\n  country_code: string;\n  city: { [key: string]: string[] };\n  importance: number;\n  _tags: string[];\n  postcode: string[];\n  population: number;\n  is_country: boolean;\n  is_highway: boolean;\n  is_city: boolean;\n  is_popular: boolean;\n  administrative: string[];\n  admin_level: number;\n  is_suburb: boolean;\n  locale_names: {\n    default: string[];\n  };\n  _geoloc: LatLng;\n  objectID: string;\n  _highlightResult: {\n    country: {\n      default: ValueMatch;\n      [key: string]: ValueMatch;\n    };\n    city: {\n      default: ValueMatch[];\n      [key: string]: ValueMatch[];\n    };\n    postcode: ValueMatch[];\n    administrative: ValueMatch[];\n    locale_names: {\n      default: ValueMatch[];\n    };\n  };\n}\n\ninterface ProviderOptions {\n  key?: string;\n  [key: string]: string | boolean | number | undefined;\n}\n\nexport default class Provider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  endpoint(): string {\n    // No query, Algolia requires POST request\n    return 'https://places-dsn.algolia.net/1/places/query';\n  }\n\n  /**\n   * Find index of value with best match\n   * (full, fallback to partial, and then to 0)\n   */\n  findBestMatchLevelIndex(vms: ValueMatch[]): number {\n    const match =\n      vms.find((vm) => vm.matchLevel === 'full') ||\n      vms.find((vm) => vm.matchLevel === 'partial');\n    return match ? vms.indexOf(match) : 0;\n  }\n\n  /**\n   * Algolia not provides labels for hits, so\n   * we will implement that builder ourselves\n   */\n  getLabel(result: RawResult): string {\n    return [\n      // Building + Street\n      result.locale_names?.default[\n        this.findBestMatchLevelIndex(\n          result._highlightResult.locale_names.default,\n        )\n      ],\n      // City\n      result.city?.default[\n        this.findBestMatchLevelIndex(result._highlightResult.city.default)\n      ],\n      // Administrative (State / Province)\n      result.administrative[\n        this.findBestMatchLevelIndex(result._highlightResult.administrative)\n      ],\n      // Zip code / Postal code\n      result.postcode?.[\n        this.findBestMatchLevelIndex(result._highlightResult.postcode)\n      ],\n      // Country\n      result.country?.default,\n    ]\n      .filter(Boolean)\n      .join(', ');\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.hits.map((r) => ({\n      x: r._geoloc.lng,\n      y: r._geoloc.lat,\n      label: this.getLabel(r),\n      bounds: null, // Algolia API does not provide bounds\n      raw: r,\n    }));\n  }\n\n  async search({ query }: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    const params = typeof query === 'string' ? { query } : query;\n\n    const request = await fetch(this.endpoint(), {\n      method: 'POST',\n      body: JSON.stringify({\n        ...this.options.params,\n        ...params,\n      }),\n    });\n\n    const json = await request.json();\n    return this.parse({ data: json });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\nimport { createScriptElement } from '../domUtils';\n\nexport interface RequestResult {\n  authenticationResultCode: string;\n  brandLogoUri: string;\n  copyright: string;\n  resourceSets: {\n    estimatedTotal: number;\n    resources: RawResult[];\n  }[];\n  statusCode: number;\n  statusDescription: string;\n  traceId: string;\n}\n\nexport interface RawResult {\n  __type: string;\n  bbox: [number, number, number, number];\n  name: string;\n  point: { type: 'Point'; coordinates: [number, number] };\n  address: {\n    adminDistrict: string;\n    adminDistrict2: string;\n    countryRegion: string;\n    formattedAddress: string;\n    locality: string;\n  };\n  confidence: string;\n  entityType: string;\n  geocodePoints: [\n    {\n      type: 'Point';\n      coordinates: [number, number];\n      calculationMethod: string;\n      usageTypes: string[];\n    },\n  ];\n  matchCodes: string[];\n}\n\nexport default class BingProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://dev.virtualearth.net/REST/v1/Locations';\n\n  endpoint({ query, jsonp }: EndpointArgument & { jsonp: string }): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.jsonp = jsonp;\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    if (response.data.resourceSets.length === 0) {\n      return [];\n    }\n\n    return response.data.resourceSets[0].resources.map((r) => ({\n      x: r.point.coordinates[1],\n      y: r.point.coordinates[0],\n      label: r.address.formattedAddress,\n      bounds: [\n        [r.bbox[0], r.bbox[1]], // s, w\n        [r.bbox[2], r.bbox[3]], // n, e\n      ],\n      raw: r,\n    }));\n  }\n\n  async search({ query }: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    const jsonp = `BING_JSONP_CB_${Date.now()}`;\n    const json = await createScriptElement<RequestResult>(\n      this.endpoint({ query, jsonp }),\n      jsonp,\n    );\n\n    return this.parse({ data: json });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\ninterface RequestResult {\n  spatialReference: { wkid: number; latestWkid: number };\n  locations: RawResult[];\n}\n\ninterface RawResult {\n  name: string;\n  extent: {\n    xmin: number;\n    ymin: number;\n    xmax: number;\n    ymax: number;\n  };\n  feature: {\n    geometry: { x: number; y: number };\n    attributes: { Score: number; Addr_Type: string };\n  };\n}\n\nexport default class EsriProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl =\n    'https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find';\n\n  endpoint({ query }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { text: query } : query;\n    params.f = 'json';\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.locations.map((r) => ({\n      x: r.feature.geometry.x,\n      y: r.feature.geometry.y,\n      label: r.name,\n      bounds: [\n        [r.extent.ymin, r.extent.xmin], // s, w\n        [r.extent.ymax, r.extent.xmax], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  results: RawResult[];\n  status: string;\n}\n\nexport interface RawResult {\n  address_components: {\n    long_name: string;\n    short_name: string;\n    types: string[];\n  }[];\n  formatted_address: string;\n  geometry: {\n    location: LatLng;\n    location_type: string;\n    viewport: {\n      northeast: LatLng;\n      southwest: LatLng;\n    };\n  };\n  place_id: string;\n  plus_code: {\n    compound_code: string;\n    global_code: string;\n  };\n  types: string[];\n}\n\nexport default class GoogleProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://maps.googleapis.com/maps/api/geocode/json';\n\n  endpoint({ query }: EndpointArgument) {\n    const params = typeof query === 'string' ? { address: query } : query;\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(result: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return result.data.results.map((r) => ({\n      x: r.geometry.location.lng,\n      y: r.geometry.location.lat,\n      label: r.formatted_address,\n      bounds: [\n        [r.geometry.viewport.southwest.lat, r.geometry.viewport.southwest.lng], // s, w\n        [r.geometry.viewport.northeast.lat, r.geometry.viewport.northeast.lng], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  items: RawResult[];\n}\n\nexport interface RawResult {\n  title: string;\n  id: string;\n  resultType: string;\n  address: {\n    label: string;\n    countryCode: string;\n    countryName: string;\n    state: string;\n    county: string;\n    city: string;\n    district: string;\n    street: string;\n    postalCode: string;\n    houseNumber: string;\n  };\n  position: LatLng;\n  access: LatLng[];\n  categories: { id: string }[];\n  contacts: { [key: string]: { value: string }[] }[];\n  scoring: {\n    queryScore: number;\n    fieldScore: {\n      placeName: number;\n    };\n  };\n}\n\nexport default class HereProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://geocode.search.hereapi.com/v1/geocode';\n\n  endpoint({ query }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.items.map((r) => ({\n      x: r.position.lng,\n      y: r.position.lat,\n      label: r.address.label,\n      bounds: null,\n      raw: r,\n    }));\n  }\n}\n","/* eslint-disable @typescript-eslint/camelcase */\nimport AbstractProvider, {\n  EndpointArgument,\n  ParseArgument,\n  ProviderOptions,\n  RequestType,\n  SearchResult,\n} from './provider';\nimport hasShape from '../lib/hasShape';\n\nexport type RequestResult = RawResult[];\n\nexport interface RawResult {\n  place_id: string;\n  license: string;\n  osm_type: string;\n  osm_id: number;\n  boundingbox: [string, string, string, string];\n  lat: string;\n  lon: string;\n  display_name: string;\n  class: string;\n  type: string;\n  importance: number;\n  icon?: string;\n}\n\nexport type OpenStreetMapProviderOptions = {\n  searchUrl?: string;\n  reverseUrl?: string;\n} & ProviderOptions;\n\nexport default class OpenStreetMapProvider extends AbstractProvider<\n  RawResult[],\n  RawResult\n> {\n  searchUrl: string;\n  reverseUrl: string;\n\n  constructor(options: OpenStreetMapProviderOptions = {}) {\n    super(options);\n\n    const host = 'https://nominatim.openstreetmap.org';\n    this.searchUrl = options.searchUrl || `${host}/search`;\n    this.reverseUrl = options.reverseUrl || `${host}/reverse`;\n  }\n\n  endpoint({ query, type }: EndpointArgument): string {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.format = 'json';\n\n    switch (type) {\n      case RequestType.REVERSE:\n        return this.getUrl(this.reverseUrl, params);\n\n      default:\n        return this.getUrl(this.searchUrl, params);\n    }\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    const records = Array.isArray(response.data)\n      ? response.data\n      : [response.data];\n\n    return records.map((r) => ({\n      x: Number(r.lon),\n      y: Number(r.lat),\n      label: r.display_name,\n      bounds: [\n        [parseFloat(r.boundingbox[0]), parseFloat(r.boundingbox[2])], // s, w\n        [parseFloat(r.boundingbox[1]), parseFloat(r.boundingbox[3])], // n, e\n      ],\n      raw: r,\n    }));\n  }\n}\n","import OpenStreetMapProvider, {\n  OpenStreetMapProviderOptions,\n} from './openStreetMapProvider';\n\nexport default class LocationIQProvider extends OpenStreetMapProvider {\n  constructor(options: OpenStreetMapProviderOptions) {\n    super({\n      ...options,\n      searchUrl: `https://locationiq.org/v1/search.php`,\n      reverseUrl: `https://locationiq.org/v1/reverse.php`,\n    });\n  }\n}\n","import AbstractProvider, {\n  EndpointArgument,\n  LatLng,\n  ParseArgument,\n  SearchArgument,\n  SearchResult,\n} from './provider';\n\nexport interface RequestResult {\n  results: RawResult[];\n}\n\nexport interface RawResult {\n  annotations: {\n    DMS: { lat: string; lng: string };\n    MGRS: string;\n    Maidenhead: string;\n    Mercator: { x: number; y: number };\n    OSM: {\n      edit_url: string;\n      note_url: string;\n      url: string;\n    };\n    UN_M49: {\n      regions: { [key: string]: string };\n      statistical_groupings: string[];\n    };\n    callingcode: number;\n    currency: {\n      alternate_symbols: string[];\n      decimal_mark: string;\n      html_entity: string;\n      iso_code: string;\n      iso_numeric: string;\n      name: string;\n      smallest_denomination: number;\n      subunit: string;\n      subunit_to_unit: number;\n      symbol: string;\n      symbol_first: number;\n      thousands_separator: string;\n    };\n    flag: string;\n    geohash: string;\n    qibla: number;\n    roadinfo: {\n      drive_on: string;\n      road: string;\n      road_type: string;\n      speed_in: string;\n    };\n    sun: {\n      rise: {\n        apparent: number;\n        astronomical: number;\n        civil: number;\n        nautical: number;\n      };\n      set: {\n        apparent: number;\n        astronomical: number;\n        civil: number;\n        nautical: number;\n      };\n    };\n    timezone: {\n      name: string;\n      now_in_dst: number;\n      offset_sec: number;\n      offset_string: string;\n      short_name: string;\n    };\n    what3words: { words: string };\n  };\n  bounds: {\n    northeast: LatLng;\n    southwest: LatLng;\n  };\n  formatted: string;\n  geometry: LatLng;\n}\n\nexport default class OpenCageProvider extends AbstractProvider<\n  RequestResult,\n  RawResult\n> {\n  searchUrl = 'https://api.opencagedata.com/geocode/v1/json';\n\n  endpoint({ query }: EndpointArgument) {\n    const params = typeof query === 'string' ? { q: query } : query;\n    params.format = 'json';\n\n    return this.getUrl(this.searchUrl, params);\n  }\n\n  parse(response: ParseArgument<RequestResult>): SearchResult<RawResult>[] {\n    return response.data.results.map((r) => ({\n      x: r.geometry.lng,\n      y: r.geometry.lat,\n      label: r.formatted,\n      bounds: [\n        [r.bounds.southwest.lat, r.bounds.southwest.lng], // s, w\n        [r.bounds.northeast.lat, r.bounds.northeast.lng], // n, e\n      ],\n      raw: r,\n    }));\n  }\n\n  async search(options: SearchArgument): Promise<SearchResult<RawResult>[]> {\n    // opencage returns a 400 error when query length < 2\n    if (options.query.length < 2) {\n      return [];\n    }\n\n    return super.search(options);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}